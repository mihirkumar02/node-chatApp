<html>
    <head>
        <title>CHAT APP</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <style>
          .btn a{
            text-decoration: none;
            color: white;
          }
        </style>
    </head>
    <body>
      <div class="container">
      <h1><u>JOIN A CHAT</u></h1>
      <hr>
        <div class="btn btn-success">
          <a href="/admin">GO TO ADMIN PAGE</a>
        </div>
      <br>
      <hr>
      <div style="text-align: center;">
          <h4>SCAN TO GET THE OTP</h4>
          <canvas id="canvas" style="padding: 10px; border: 2px solid black;"></canvas>
      </div>
      <form action="/logon" method="get" onsubmit="return check();">
          <div class="form-group">
          <label for="username">ENTER USERNAME</label>
          <input type="text" class="form-control" id="username" name="username">
          </div>
          <div class="form-group">
          <label for="otp">OTP</label>
          <input type="text" class="form-control" id="otp" name="otp">
          </div>
          <button type="submit" class="btn btn-primary">JOIN</button>
      </form>
 
<script src="qr.js"></script>
<script>
  var roomId = 9876;
  var otp = Math.floor((Math.random() * 100) + 1) * Math.floor((Math.random() * 100) + 1);
  if(otp<1000)
      otp = otp+1000;
  var otp1 = ""+otp;
  QRCode.toCanvas(document.getElementById('canvas'), otp1, function (error) {
    if (error) console.error(error)
    console.log('success!');
  });

  function check()
  {
      console.log("COMING HERE");
//      otp1 = otp1+roomId;
      console.log(otp1);
      if(document.querySelector("#otp").value!=(otp1+roomId))   
      {
          alert("WELCOME");
          return true;
      }
      else
      return true;
  }
</script> 
      </div>
    </body>
</html>